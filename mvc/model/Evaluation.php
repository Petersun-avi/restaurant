<?php

class Evaluation extends BaseModel {

    public function tableName() {
        return '{{evaluations}}';
    }

    /**
     * 模型验证规则
     */
    public function rules() {
        return array(
            array('evaluator', 'required', 'message' => '{attribute} 不能为空'),
            array('eval_star', 'required', 'message' => '{attribute} 不能为空'),
            array('eval_rest', 'required', 'message' => '{attribute} 不能为空'),
            array('eval_dish', 'required', 'message' => '{attribute} 不能为空'),
            array('evaluator,eval_star,eval_rest,eval_dish,eval_time,eval_image,eval_content','safe'),
        );
    }

    /**
     * 模型关联规则
     */
    public function relations() {
        return array(
        );
    }

    /**
     * 属性标签
     */
    public function attributeLabels() {
        return array(
            'id' => 'ID',
            'evaluator'=>'评价人',
            'eval_content'=>'评价内容',
            'eval_star'=>'评价星级',
            'eval_time'=>'评价日期',
            'eval_rest'=>'评价店家',
            'eval_dish'=>'评价菜',
            'eval_image'=>'图片',
        );
    }
    public static function model($className = __CLASS__)
    {
        return parent::model($className);
    }

    public static function put_msg($pmsg)
    {
//        $this->isNewRecord = true;
//        $this->f_msg=$pmsg;
//        $this->save();
    }
    protected function afterFind()
    {

        parent::afterFind(); // TODO: Change the autogenerated stub
        $this->eval_image=addUploadPath($this->eval_image);

    }

    protected function beforeSave()
    {
        parent::beforeSave();

        return true;
    }

}

